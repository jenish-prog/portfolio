{"ast":null,"code":"import{useState,useEffect,useRef}from'react';function useValueAnimation(ref,end,duration){const[value,setValue]=useState(0);const[isVisible,setIsVisible]=useState(false);const animationFrameId=useRef(null);const startTimeRef=useRef(null);const animate=timestamp=>{if(!startTimeRef.current)startTimeRef.current=timestamp;const progress=Math.min((timestamp-startTimeRef.current)/duration,1);setValue(Math.floor(progress*end));if(progress<1){animationFrameId.current=requestAnimationFrame(animate);}};useEffect(()=>{const observer=new IntersectionObserver(_ref=>{let[entry]=_ref;if(entry.isIntersecting){setIsVisible(true);observer.unobserve(entry.target);}},{threshold:0.1});if(ref.current){observer.observe(ref.current);}return()=>{if(ref.current){observer.unobserve(ref.current);}};},[ref]);useEffect(()=>{if(isVisible){animationFrameId.current=requestAnimationFrame(animate);}return()=>cancelAnimationFrame(animationFrameId.current);},[isVisible,end,duration]);return value;}export default useValueAnimation;","map":{"version":3,"names":["useState","useEffect","useRef","useValueAnimation","ref","end","duration","value","setValue","isVisible","setIsVisible","animationFrameId","startTimeRef","animate","timestamp","current","progress","Math","min","floor","requestAnimationFrame","observer","IntersectionObserver","_ref","entry","isIntersecting","unobserve","target","threshold","observe","cancelAnimationFrame"],"sources":["/workspaces/portfolio/src/useValueAnimation.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\n\nfunction useValueAnimation(ref, end, duration) {\n  const [value, setValue] = useState(0);\n  const [isVisible, setIsVisible] = useState(false);\n  const animationFrameId = useRef(null);\n  const startTimeRef = useRef(null);\n\n  const animate = (timestamp) => {\n    if (!startTimeRef.current) startTimeRef.current = timestamp;\n    const progress = Math.min((timestamp - startTimeRef.current) / duration, 1);\n    setValue(Math.floor(progress * end));\n    if (progress < 1) {\n      animationFrameId.current = requestAnimationFrame(animate);\n    }\n  };\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsVisible(true);\n          observer.unobserve(entry.target);\n        }\n      },\n      {\n        threshold: 0.1,\n      }\n    );\n\n    if (ref.current) {\n      observer.observe(ref.current);\n    }\n\n    return () => {\n      if (ref.current) {\n        observer.unobserve(ref.current);\n      }\n    };\n  }, [ref]);\n\n  useEffect(() => {\n    if (isVisible) {\n      animationFrameId.current = requestAnimationFrame(animate);\n    }\n    return () => cancelAnimationFrame(animationFrameId.current);\n  }, [isVisible, end, duration]);\n\n  return value;\n}\n\nexport default useValueAnimation;\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAEnD,QAAS,CAAAC,iBAAiBA,CAACC,GAAG,CAAEC,GAAG,CAAEC,QAAQ,CAAE,CAC7C,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGR,QAAQ,CAAC,CAAC,CAAC,CACrC,KAAM,CAACS,SAAS,CAAEC,YAAY,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAAAW,gBAAgB,CAAGT,MAAM,CAAC,IAAI,CAAC,CACrC,KAAM,CAAAU,YAAY,CAAGV,MAAM,CAAC,IAAI,CAAC,CAEjC,KAAM,CAAAW,OAAO,CAAIC,SAAS,EAAK,CAC7B,GAAI,CAACF,YAAY,CAACG,OAAO,CAAEH,YAAY,CAACG,OAAO,CAAGD,SAAS,CAC3D,KAAM,CAAAE,QAAQ,CAAGC,IAAI,CAACC,GAAG,CAAC,CAACJ,SAAS,CAAGF,YAAY,CAACG,OAAO,EAAIT,QAAQ,CAAE,CAAC,CAAC,CAC3EE,QAAQ,CAACS,IAAI,CAACE,KAAK,CAACH,QAAQ,CAAGX,GAAG,CAAC,CAAC,CACpC,GAAIW,QAAQ,CAAG,CAAC,CAAE,CAChBL,gBAAgB,CAACI,OAAO,CAAGK,qBAAqB,CAACP,OAAO,CAAC,CAC3D,CACF,CAAC,CAEDZ,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoB,QAAQ,CAAG,GAAI,CAAAC,oBAAoB,CACvCC,IAAA,EAAa,IAAZ,CAACC,KAAK,CAAC,CAAAD,IAAA,CACN,GAAIC,KAAK,CAACC,cAAc,CAAE,CACxBf,YAAY,CAAC,IAAI,CAAC,CAClBW,QAAQ,CAACK,SAAS,CAACF,KAAK,CAACG,MAAM,CAAC,CAClC,CACF,CAAC,CACD,CACEC,SAAS,CAAE,GACb,CACF,CAAC,CAED,GAAIxB,GAAG,CAACW,OAAO,CAAE,CACfM,QAAQ,CAACQ,OAAO,CAACzB,GAAG,CAACW,OAAO,CAAC,CAC/B,CAEA,MAAO,IAAM,CACX,GAAIX,GAAG,CAACW,OAAO,CAAE,CACfM,QAAQ,CAACK,SAAS,CAACtB,GAAG,CAACW,OAAO,CAAC,CACjC,CACF,CAAC,CACH,CAAC,CAAE,CAACX,GAAG,CAAC,CAAC,CAETH,SAAS,CAAC,IAAM,CACd,GAAIQ,SAAS,CAAE,CACbE,gBAAgB,CAACI,OAAO,CAAGK,qBAAqB,CAACP,OAAO,CAAC,CAC3D,CACA,MAAO,IAAMiB,oBAAoB,CAACnB,gBAAgB,CAACI,OAAO,CAAC,CAC7D,CAAC,CAAE,CAACN,SAAS,CAAEJ,GAAG,CAAEC,QAAQ,CAAC,CAAC,CAE9B,MAAO,CAAAC,KAAK,CACd,CAEA,cAAe,CAAAJ,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}